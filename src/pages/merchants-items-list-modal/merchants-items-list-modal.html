<!--
  Generated template for the MerchantsItemsListModalPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-toolbar>
    <ion-title>{{merchant.businessName}}</ion-title>
    <ion-buttons start>
      <button ion-button (click)="dismiss()">
        <span ion-text color="light" showWhen="ios">Cancel</span>
        <ion-icon name="md-close" color="light" showWhen="android,windows"></ion-icon>
      </button>
    </ion-buttons>
  </ion-toolbar>
  <ion-toolbar sticky no-border-top no-padding>
    <ion-searchbar no-padding no-margin color="primary"
                    [(ngModel)]="queryText"
                    (ionInput)="searchKeyword()"
                    placeholder="Search">
    </ion-searchbar>
  </ion-toolbar>

</ion-header>


<ion-content padding>
  
  <div *ngIf="segment === 'all'">
    <div *ngIf="loading && items.length == 0" text-center>
      <img class="over-image" src="assets/img/loading/Eclipse-1s-200px.gif" alt="avatar">
      <div text-center>Loading Items...</div>
    </div>
    <div *ngIf="items && items.length > 0">
      <ion-item no-padding *ngFor="let item of items" [ngClass]="{'active': item.added }" 
        (click)="addItemToList(item)">
        <ion-icon name="checkmark-circle" *ngIf="item.added" color="primary"></ion-icon>
        {{item.name}}
      </ion-item>
    </div>
  </div>
  
  <div *ngIf="segment === 'search'">
    <div *ngIf="loading && searchResults.length == 0" text-center>
      <img class="over-image" src="assets/img/loading/Eclipse-1s-200px.gif" alt="avatar">
      <div text-center>Loading Items...</div>
    </div>
    <div *ngIf="searchResults && searchResults.length > 0">
      <ion-item no-padding *ngFor="let item of searchResults" [ngClass]="{'active': item.added }" 
        (click)="addItemToList(item)">
        <ion-icon name="checkmark-circle" *ngIf="item.added" color="primary"></ion-icon>
        {{item.name}}
      </ion-item>
    </div>
  </div>
</ion-content>

<ion-footer *ngIf="purchasedItemList.length > 0">
    <div>
      <button no-lines ion-item color="primary" text-center (click)="markItemAsPurchased()">Mark Items As Purchased</button>
    </div>
</ion-footer>
